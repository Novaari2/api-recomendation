import pandas as pd
import numpy as np

from sklearn.metrics.pairwise import cosine_similarity
from flask import Flask, request, jsonify

data = {
    'User': ['User 1', 'User 1', 'User 2', 'User 2', 'User 3', 'User 3', 'User 4', 'User 4'],
    'Product': ['Product D', 'Product B', 'Product A', 'Product C', 'Product D', 'Product E', 'Product A', 'Product B'],
    'Rating': [4, 5, 3, 4, 5, 3, 2, 4]
}

df = pd.DataFrame(data)
user_item_matrix = df.pivot_table(index='User', columns='Product', values='Rating')

item_similarity = cosine_similarity(user_item_matrix.fillna(0).T)

item_similarity_df = pd.DataFrame(item_similarity, index=user_item_matrix.columns, columns=user_item_matrix.columns)

def get_recommendations(product, item_similarity_df, top_n=3):
    similar_scores = item_similarity_df[product].sort_values(ascending=False)
    top_products = similar_scores.iloc[1:top_n+1].index
    return top_products

# Contoh rekomendasi untuk Product A
print(get_recommendations('Product A', item_similarity_df))

app = Flask(__name__)

@app.route('/recommend', methods=['GET'])
def recommend():
    product = request.args.get('product')
    recommendations = get_recommendations(product, item_similarity_df)
    
    return jsonify({'recommendations': list(recommendations)})

if __name__ == '__main__':
    app.run(debug=True)



DB_CONNECTION=mysql
DB_HOST=103.127.136.57
DB_PORT=3327
DB_DATABASE=frontstore
DB_USERNAME=root
DB_PASSWORD=root